---
title: SPEC-SCR-002 ダッシュボード
description: ダッシュボード画面の仕様
---

## 目的 / In-Out / Related
- **目的**: ログイン後のホーム画面、業務全体のサマリーを表示
- **対象範囲（In/Out）**: KPI表示、通知、最近のアクティビティ
- **Related**: REQ-G03 / [権限/認可](../../spec/authz/)

---

## ワイヤーフレーム

```
┌─────────────────────────────────────────────────────────────┐
│ 🏠 OpsHub          🔍 検索      🔔(3)    👤 田中太郎 ▼   │
├──────────┬──────────────────────────────────────────────────┤
│ サイドバー │                                                │
│          │  こんにちは、田中さん                            │
│ 📊 ダッシュ│                                                │
│ 📋 申請   │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐         │
│ 📁 PJ    │  │未処理 │ │今月  │ │承認  │ │PJ数  │         │
│ ⏱ 工数   │  │申請   │ │工数  │ │待ち  │ │      │         │
│ 💰 経費   │  │ 12件  │ │142h  │ │ 5件  │ │ 8件  │         │
│ 📄 請求   │  └──────┘ └──────┘ └──────┘ └──────┘         │
│ ⚙ 管理   │                                                │
│          │  ┌─────────────────┐ ┌─────────────────────┐   │
│          │  │ 最近の通知       │ │ 申請ステータス      │   │
│          │  │                 │ │                     │   │
│          │  │ ・田中が経費申請 │ │   [円グラフ]        │   │
│          │  │ ・PJ-A 承認完了 │ │   承認: 60%         │   │
│          │  │ ・工数締め通知  │ │   審査中: 25%       │   │
│          │  │ ・新タスク割当  │ │   下書き: 15%       │   │
│          │  └─────────────────┘ └─────────────────────┘   │
│          │                                                │
│          │  ┌──────────────────────────────────────────┐   │
│          │  │ 今月の工数サマリー                       │   │
│          │  │ PJ-A: ████████░░ 80h                     │   │
│          │  │ PJ-B: ████░░░░░░ 40h                     │   │
│          │  │ PJ-C: ██░░░░░░░░ 22h                     │   │
│          │  └──────────────────────────────────────────┘   │
└──────────┴──────────────────────────────────────────────────┘
```

## UI構成

### KPIカード（上部4枚）

| カード | データソース | ロール制限 |
|---|---|---|
| 未処理申請 | `workflows WHERE status='submitted' AND approver=me` | Approver/PM |
| 今月の工数 | `timesheets WHERE month=current AND user=me` | 全ロール |
| 承認待ち | `workflows WHERE status='submitted' AND created_by=me` | 全ロール |
| プロジェクト数 | `projects WHERE tenant_id=my_tenant` | 全ロール |

### セクション

| セクション | 内容 | 更新頻度 |
|---|---|---|
| 最近の通知 | 自分に関連する通知（最新5件） | リアルタイム（Supabase Realtime検討） |
| 申請ステータス | 自分の申請のステータス分布 | ページロード時 |
| 工数サマリー | 今月のPJ別工数プログレスバー | ページロード時 |

## 権限別表示

| ロール | 追加表示 |
|---|---|
| Member | 自分の申請・工数のみ |
| Approver | +承認待ち一覧ウィジェット |
| PM | +管轄PJの工数進捗 |
| Accounting | +経費・請求サマリー |
| Tenant Admin | +テナント全体の利用状況 |

## データ取得

- Server Components でレンダリング（SSR）
- RLS により自動的にテナント内データのみ取得
- KPIは並列クエリ（`Promise.all`）でフェッチ
